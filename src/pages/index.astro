---
import Layout from '../layouts/Layout.astro';
import { eras, getAllJobs } from '../data/jobs';
import ImageSlideshow from '../components/ImageSlideshow.astro';

const allJobs = await getAllJobs();
const totalJobs = allJobs.length;
const totalEras = eras.length;
const base = import.meta.env.BASE_URL;

// Images from The Atlantic article: Child Labor in America 100 Years Ago
// Source: https://www.theatlantic.com/photo/2015/07/child-labor-in-america-100-years-ago/397478/
const slideshowImages = [
	{
		src: 'https://cdn.theatlantic.com/thumbor/6Q6qAst87vGCN_sp9CCzQyTa7Hs=/900x636/media/img/photo/2015/07/child-labor-in-america-100-years-ag/c01_03945u/original.jpg',
		alt: '7-year-old Ferris, a small newsboy in Mobile, Alabama, October 1914',
		caption: '7-year-old Ferris, a newsboy in Mobile, Alabama, October 1914'
	},
	{
		src: 'https://cdn.theatlantic.com/thumbor/XpsjW6GmGH9LEXhe0dG9yfdQ5KQ=/900x612/media/img/photo/2015/07/child-labor-in-america-100-years-ag/c02_01583u/original.jpg',
		alt: 'A spinner in the Globe Cotton Mill in Augusta, Georgia, January 1909',
		caption: 'A spinner in the Globe Cotton Mill in Augusta, Georgia, January 1909'
	},
	{
		src: 'https://cdn.theatlantic.com/thumbor/2g1P3rmU2C_xrrzMpzyICI3siFU=/900x620/media/img/photo/2015/07/child-labor-in-america-100-years-ag/c03_03282u/original.jpg',
		alt: 'Western Union messengers in Hartford, Connecticut',
		caption: 'Western Union messengers in Hartford, Connecticut, working alternate nights until 10 P.M.'
	},
	{
		src: 'https://cdn.theatlantic.com/thumbor/nJ-yi1aRxSYQlPdh2tbgUWNarS4=/900x689/media/img/photo/2015/07/child-labor-in-america-100-years-ag/c04_01476u/original.jpg',
		alt: 'Textile mill workers in Newberry, South Carolina, December 1908',
		caption: 'Textile mill workers in Newberry, South Carolina, December 1908'
	},
	{
		src: 'https://cdn.theatlantic.com/thumbor/J5DTID_mNeE4-TO5HBNBlfPHIx4=/900x603/media/img/photo/2015/07/child-labor-in-america-100-years-ag/c05_01658u/original.jpg',
		alt: 'Willie, a young spinner in Quidwick Co. Mill, Anthony, Rhode Island',
		caption: 'Willie, a young spinner in Quidwick Co. Mill, Anthony, Rhode Island, April 1909'
	},
	{
		src: 'https://cdn.theatlantic.com/thumbor/_zeEl_MIA4v5vwo8fqicY_L8Vyo=/900x625/media/img/photo/2015/07/child-labor-in-america-100-years-ag/c06_00629u/original.jpg',
		alt: 'Child labor photograph from The Atlantic',
		caption: 'Child labor photograph from The Atlantic'
	},
	{
		src: 'https://cdn.theatlantic.com/thumbor/7UyaNJN_Z8bvPIRW2jmdfHmr29g=/900x620/media/img/photo/2015/07/child-labor-in-america-100-years-ag/c07_01094u/original.jpg',
		alt: 'Child labor photograph from The Atlantic',
		caption: 'Child labor photograph from The Atlantic'
	}
];
---

<Layout title="Made in America - Work Through History">
	<div class="homepage">
		<section class="splash-image">
			<ImageSlideshow images={slideshowImages} autoplayInterval={5000} />
			<div class="splash-overlay">
				<div class="splash-title">
					<h1>Work Through History</h1>
				</div>
				<div class="splash-caption">
					<p>Lewis Hine / Library of Congress. Photographs from <a href="https://www.theatlantic.com/photo/2015/07/child-labor-in-america-100-years-ago/397478/#img01" target="_blank" rel="noopener noreferrer">The Atlantic</a></p>
				</div>
			</div>
		</section>

		<section class="hero">
			<div class="hero-masthead">
				<div class="masthead-border-top"></div>
				<div class="hero-subtitle-container">
					<span class="hero-subtitle">A Lens on American History</span>
				</div>
				<div class="masthead-border-bottom"></div>
			</div>
			
			<div class="hero-content">
				<div class="hero-description">
					<p class="lead-paragraph">
						<strong>From colonial farms to AI-powered workplaces</strong>—explore American history through 
						the lens of work. Browse authentic job boards and professional networks from five distinct eras, 
						each reflecting the opportunities, wages, and workplace realities of its time.
					</p>
					<p>
						See how discrimination, labor rights, technological change, and economic forces shaped 
						who could work, what work meant, and how workers were valued across American history. 
						This is history viewed through the perspective of work—a window into the lives and 
						struggles of those who built America.
					</p>
				</div>

				<div class="hero-stats">
					<div class="stat-item">
						<div class="stat-number">{totalEras}</div>
						<div class="stat-label">Historical Eras</div>
					</div>
					<div class="stat-divider"></div>
					<div class="stat-item">
						<div class="stat-number">{totalJobs}</div>
						<div class="stat-label">Job Listings</div>
					</div>
					<div class="stat-divider"></div>
					<div class="stat-item">
						<div class="stat-number">250+</div>
						<div class="stat-label">Years of History</div>
					</div>
				</div>
			</div>
		</section>

		<section class="featured-quote">
			<blockquote>
				"Work is a lens through which we can understand American history—the struggles for freedom, 
				dignity, and a fair wage that shaped our nation."
			</blockquote>
			<cite>— Historical Archives</cite>
		</section>

		<section class="explore-section">
			<a href={`${base}${eras[0].id}`} class="explore-button">Explore</a>
		</section>
	</div>
</Layout>

<style>
	.homepage {
		max-width: 1400px;
		margin: 0 auto;
		padding: 0;
		background: #f5f1e8;
		min-height: 100vh;
		background-image: 
			url("data:image/svg+xml,%3Csvg width='100' height='100' xmlns='http://www.w3.org/2000/svg'%3E%3Cdefs%3E%3Cpattern id='paper' x='0' y='0' width='100' height='100' patternUnits='userSpaceOnUse'%3E%3Ccircle cx='20' cy='20' r='0.5' fill='%23d4c4a8' opacity='0.3'/%3E%3Ccircle cx='80' cy='40' r='0.5' fill='%23d4c4a8' opacity='0.2'/%3E%3Ccircle cx='40' cy='80' r='0.5' fill='%23d4c4a8' opacity='0.25'/%3E%3C/pattern%3E%3C/defs%3E%3Crect width='100' height='100' fill='url(%23paper)'/%3E%3C/svg%3E"),
			repeating-linear-gradient(
				0deg,
				transparent,
				transparent 2px,
				rgba(139, 115, 85, 0.03) 2px,
				rgba(139, 115, 85, 0.03) 4px
			);
	}

	.hero {
		background: #fefcf8;
		border: 2px dashed #8b7355;
		border-top: 4px solid #8b4a4a;
		border-left: 4px solid #4a5568;
		margin: 2rem;
		padding: 3rem 2.5rem;
		box-shadow: 4px 4px 0px rgba(0, 0, 0, 0.15);
		position: relative;
		background-image: 
			url("data:image/svg+xml,%3Csvg width='100' height='100' xmlns='http://www.w3.org/2000/svg'%3E%3Cdefs%3E%3Cpattern id='paper' x='0' y='0' width='100' height='100' patternUnits='userSpaceOnUse'%3E%3Ccircle cx='20' cy='20' r='0.5' fill='%23d4c4a8' opacity='0.2'/%3E%3Ccircle cx='80' cy='40' r='0.5' fill='%23d4c4a8' opacity='0.15'/%3E%3Ccircle cx='40' cy='80' r='0.5' fill='%23d4c4a8' opacity='0.18'/%3E%3C/pattern%3E%3C/defs%3E%3Crect width='100' height='100' fill='url(%23paper)'/%3E%3C/svg%3E");
	}

	.hero::before {
		content: '';
		position: absolute;
		top: -2px;
		right: -2px;
		width: 30px;
		height: 30px;
		border-top: 3px solid #8b4a4a;
		border-right: 3px solid #8b4a4a;
	}

	.hero::after {
		content: '';
		position: absolute;
		bottom: -2px;
		left: -2px;
		width: 30px;
		height: 30px;
		border-bottom: 3px solid #4a5568;
		border-left: 3px solid #4a5568;
	}

	.hero-masthead {
		text-align: center;
		margin-bottom: 2.5rem;
		position: relative;
	}

	.masthead-border-top,
	.masthead-border-bottom {
		height: 1px;
		background: transparent;
		margin: 0.75rem 0;
		position: relative;
		border-top: 1px dashed #d4c4a8;
		border-bottom: 1px dashed #d4c4a8;
	}

	.masthead-border-top::before,
	.masthead-border-bottom::before {
		content: '';
		position: absolute;
		left: 50%;
		transform: translateX(-50%);
		width: 60px;
		height: 1px;
		background: #8b4a4a;
		top: 0;
	}

	.masthead-border-top::after,
	.masthead-border-bottom::after {
		content: '◆';
		position: absolute;
		left: 50%;
		transform: translateX(-50%);
		color: #8b4a4a;
		font-size: 0.6rem;
		top: -0.3rem;
		background: #fefcf8;
		padding: 0 0.5rem;
	}

	.hero-subtitle-container {
		display: flex;
		justify-content: center;
		align-items: center;
		flex-wrap: wrap;
	}

	.hero-subtitle {
		font-size: 2rem;
		color: #8b4a4a;
		font-weight: 700;
		font-family: 'Newsreader', 'Times New Roman', serif;
		text-transform: uppercase;
		letter-spacing: 0.2em;
		position: relative;
	}

	.hero-date {
		font-size: 0.9rem;
		color: #4a5568;
		font-family: 'Newsreader', 'Times New Roman', serif;
		font-style: italic;
		text-transform: uppercase;
		letter-spacing: 0.1em;
	}

	.hero-content {
		display: flex;
		flex-direction: column;
		gap: 2rem;
	}

	.hero-stats {
		display: flex;
		flex-direction: row;
		gap: 2rem;
		padding: 1.5rem;
		border: 2px solid #8b7355;
		border-top: 4px solid #4a5568;
		background: #faf8f3;
		justify-content: center;
		align-items: center;
	}

	.stat-item {
		text-align: center;
	}

	.stat-number {
		font-size: 2.5rem;
		font-weight: 700;
		color: #8b4a4a;
		font-family: 'Old Standard TT', 'Times New Roman', serif;
		line-height: 1;
		margin-bottom: 0.25rem;
	}

	.stat-label {
		font-size: 0.75rem;
		color: #4a5568;
		font-family: 'Newsreader', 'Times New Roman', serif;
		text-transform: uppercase;
		letter-spacing: 0.1em;
		font-weight: 600;
	}

	.stat-divider {
		width: 1px;
		height: 60px;
		background: transparent;
		border-left: 1px dashed #d4c4a8;
		margin: 0 0.5rem;
		position: relative;
		flex-shrink: 0;
	}

	.stat-divider::before {
		content: '•';
		position: absolute;
		top: 50%;
		left: 50%;
		transform: translate(-50%, -50%);
		color: #8b4a4a;
		background: #faf8f3;
		padding: 0.5rem 0;
		font-size: 0.8rem;
	}

	.hero-description {
		font-size: 1.05rem;
		color: #2c2416;
		line-height: 1.8;
		font-family: 'Newsreader', 'Times New Roman', serif;
		text-align: justify;
	}

	.hero-description .lead-paragraph {
		font-size: 1.15rem;
		margin-bottom: 1rem;
		text-indent: 1.5em;
	}

	.hero-description .lead-paragraph strong {
		color: #4a5568;
		font-weight: 700;
	}

	.hero-description p {
		margin: 0;
		text-indent: 1.5em;
	}

	.splash-image {
		position: relative;
		width: 100%;
		max-width: 100%;
		height: 500px;
		min-height: 500px;
		overflow: hidden;
		margin-bottom: 2rem;
		background: #2c2416;
		box-sizing: border-box;
	}

	.splash-image :global(.slideshow-container) {
		width: 100%;
		max-width: 100%;
		height: 100%;
		min-height: 500px;
		box-sizing: border-box;
	}

	.splash-image :global(.react-slideshow-container) {
		width: 100%;
		max-width: 100%;
		height: 100%;
		min-height: 500px;
		box-sizing: border-box;
	}

	.splash-image :global(.react-slideshow-container .images-wrap) {
		width: 100%;
		max-width: 100%;
		height: 100%;
		min-height: 500px;
		box-sizing: border-box;
	}

	.splash-image :global(.react-slideshow-container .images-wrap > div) {
		width: 100%;
		max-width: 100%;
		height: 100%;
		min-height: 500px;
		box-sizing: border-box;
	}

	.splash-image :global(.slide) {
		width: 100%;
		max-width: 100%;
		height: 100%;
		min-height: 500px;
		box-sizing: border-box;
	}

	.splash-image img {
		width: 100%;
		max-width: 100%;
		height: 100%;
		min-height: 500px;
		display: block;
		object-fit: cover;
		object-position: center;
		filter: sepia(20%) contrast(1.1) brightness(0.95);
		box-sizing: border-box;
	}

	.splash-overlay {
		position: absolute;
		bottom: 0;
		left: 0;
		right: 0;
		background: linear-gradient(to top, rgba(0, 0, 0, 0.8), transparent);
		padding: 2rem;
		display: flex;
		justify-content: space-between;
		align-items: flex-end;
		gap: 2rem;
		z-index: 20;
		pointer-events: none;
	}

	.splash-overlay * {
		pointer-events: auto;
	}

	.splash-title {
		flex: 1;
	}

	.splash-title h1 {
		font-size: 3rem;
		font-weight: 700;
		color: #fff;
		margin: 0 0 0.5rem 0;
		font-family: 'Old Standard TT', 'Times New Roman', serif;
		text-transform: uppercase;
		letter-spacing: 0.1em;
		text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);
		line-height: 1.1;
	}

	.splash-subtitle {
		font-size: 1.25rem;
		color: rgba(255, 255, 255, 0.95);
		margin: 0;
		font-family: 'Newsreader', 'Times New Roman', serif;
		text-transform: uppercase;
		letter-spacing: 0.15em;
		text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.7);
		font-weight: 600;
	}

	.splash-caption {
		text-align: right;
		flex-shrink: 0;
	}

	.splash-caption p {
		color: rgba(255, 255, 255, 0.9);
		font-size: 0.75rem;
		font-family: 'Newsreader', 'Times New Roman', serif;
		font-style: italic;
		margin: 0;
		text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
	}

	.splash-caption a {
		color: rgba(255, 255, 255, 0.9);
		text-decoration: underline;
		text-decoration-color: rgba(255, 255, 255, 0.5);
		transition: text-decoration-color 0.2s;
	}

	.splash-caption a:hover {
		text-decoration-color: rgba(255, 255, 255, 1);
	}

	.featured-quote {
		background: #fefcf8;
		border: 3px solid #8b7355;
		border-left: 6px solid #8b4a4a;
		margin: 3rem 2rem;
		padding: 3rem 3rem;
		box-shadow: 4px 4px 0px rgba(0, 0, 0, 0.1);
		position: relative;
		background-image: 
			url("data:image/svg+xml,%3Csvg width='60' height='60' xmlns='http://www.w3.org/2000/svg'%3E%3Cdefs%3E%3Cpattern id='aged' x='0' y='0' width='60' height='60' patternUnits='userSpaceOnUse'%3E%3Ccircle cx='30' cy='30' r='0.5' fill='%238b7355' opacity='0.05'/%3E%3C/pattern%3E%3C/defs%3E%3Crect width='60' height='60' fill='url(%23aged)'/%3E%3C/svg%3E");
	}

	.featured-quote::before {
		content: '';
		position: absolute;
		top: -3px;
		right: -3px;
		width: 25px;
		height: 25px;
		border-top: 3px solid #8b4a4a;
		border-right: 3px solid #8b4a4a;
	}

	.featured-quote::after {
		content: '';
		position: absolute;
		bottom: -3px;
		left: -3px;
		width: 25px;
		height: 25px;
		border-bottom: 3px solid #8b4a4a;
		border-left: 3px solid #8b4a4a;
	}

	.featured-quote blockquote {
		margin: 0 0 1.5rem 0;
		font-size: 1.5rem;
		font-style: italic;
		color: #2c2416;
		line-height: 1.8;
		font-family: 'Newsreader', 'Times New Roman', serif;
		text-align: center;
		position: relative;
		padding: 0 3rem;
		font-weight: 500;
	}

	.featured-quote blockquote::before,
	.featured-quote blockquote::after {
		content: '"';
		font-size: 4rem;
		color: #8b4a4a;
		position: absolute;
		opacity: 0.25;
		font-family: 'Old Standard TT', serif;
		line-height: 1;
	}

	.featured-quote blockquote::before {
		left: 0;
		top: -0.5rem;
	}

	.featured-quote blockquote::after {
		right: 0;
		bottom: -1.5rem;
	}

	.featured-quote cite {
		display: block;
		text-align: right;
		font-size: 1rem;
		color: #4a5568;
		font-style: normal;
		font-family: 'Old Standard TT', 'Times New Roman', serif;
		text-transform: uppercase;
		letter-spacing: 0.15em;
		margin-top: 1.5rem;
		padding-top: 1.5rem;
		position: relative;
		font-weight: 600;
	}

	.featured-quote cite::before {
		content: '';
		position: absolute;
		top: 0;
		right: 0;
		width: 150px;
		height: 2px;
		background: linear-gradient(to right, transparent, #8b4a4a);
	}

	.explore-section {
		margin: 4rem 2rem;
		text-align: center;
	}

	.explore-button {
		display: inline-block;
		padding: 1rem 2.5rem;
		background: transparent;
		color: #4a5568;
		text-decoration: none;
		font-size: 1.1rem;
		font-weight: 600;
		font-family: 'Newsreader', 'Times New Roman', serif;
		text-transform: uppercase;
		letter-spacing: 0.15em;
		border: 2px solid #8b7355;
		border-top: 3px solid #8b4a4a;
		border-left: 3px solid #8b4a4a;
		transition: all 0.3s ease;
		position: relative;
		background: #fefcf8;
		box-shadow: 2px 2px 0px rgba(0, 0, 0, 0.1);
	}

	.explore-button::before {
		content: '';
		position: absolute;
		top: -3px;
		right: -3px;
		width: 15px;
		height: 15px;
		border-top: 2px solid #8b4a4a;
		border-right: 2px solid #8b4a4a;
		transition: all 0.3s ease;
	}

	.explore-button::after {
		content: '';
		position: absolute;
		bottom: -3px;
		left: -3px;
		width: 15px;
		height: 15px;
		border-bottom: 2px solid #8b4a4a;
		border-left: 2px solid #8b4a4a;
		transition: all 0.3s ease;
	}

	.explore-button:hover {
		color: #8b4a4a;
		border-color: #8b4a4a;
		background: #faf8f3;
		transform: translate(-1px, -1px);
		box-shadow: 3px 3px 0px rgba(139, 74, 74, 0.2);
	}

	.explore-button:hover::before,
	.explore-button:hover::after {
		border-color: #8b4a4a;
	}

	@media (max-width: 1024px) {
		.hero-stats {
			flex-wrap: wrap;
			gap: 1.5rem;
		}

		.stat-divider {
			height: 50px;
		}
	}

	@media (max-width: 768px) {
		.homepage {
			margin: 0;
		}

		.splash-image {
			margin-bottom: 1rem;
		}

		.splash-overlay {
			padding: 1.5rem 1rem;
			flex-direction: column;
			align-items: flex-start;
			gap: 1rem;
		}

		.splash-title h1 {
			font-size: 2rem;
		}

		.splash-subtitle {
			font-size: 1rem;
		}

		.splash-caption {
			text-align: left;
			width: 100%;
		}

		.splash-caption p {
			font-size: 0.65rem;
		}

		.hero,
		.featured-quote,
		.explore-section {
			margin: 1rem;
		}

		.hero {
			padding: 2rem 1.5rem;
		}

		.hero-subtitle {
			font-size: 1.5rem;
		}

		.hero-stats {
			flex-direction: column;
			gap: 1rem;
		}

		.stat-divider {
			width: auto;
			height: 1px;
			margin: 0.5rem 0;
		}

		.hero-description {
			font-size: 0.95rem;
		}

		.hero-description .lead-paragraph {
			font-size: 1rem;
		}

		.featured-quote {
			padding: 2rem 1.5rem;
		}

		.featured-quote blockquote {
			font-size: 1.25rem;
			padding: 0 1.5rem;
		}

		.featured-quote blockquote::before,
		.featured-quote blockquote::after {
			font-size: 3rem;
		}

		.explore-button {
			padding: 0.875rem 2rem;
			font-size: 0.95rem;
		}
	}
</style>
