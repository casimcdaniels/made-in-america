---
import type { FeedPost } from '../data/feed';
import FeedPostComponent from './FeedPost.astro';
import { getEraTheme } from '../data/feed';

interface Props {
	posts: FeedPost[];
	eraId?: string;
}

const { posts, eraId } = Astro.props;
const theme = eraId ? getEraTheme(eraId) : null;
---

<section class="feed-container" style={theme ? `--feed-accent: ${theme.accent};` : ''}>
	<div class="feed-header">
		<h2>Community Feed</h2>
		<p class="feed-subtitle">Thoughts and conversations from the era</p>
	</div>
	
	<div class="feed-posts">
		{posts.map((post, index) => (
			<FeedPostComponent post={post} />
		))}
	</div>
	
	{posts.length === 0 && (
		<div class="no-posts">
			<p>No posts yet. Be the first to share your thoughts!</p>
		</div>
	)}
</section>

<style>
	.feed-container {
		background: #fff;
		border-radius: 0;
		padding: 2rem;
		margin-bottom: 2rem;
		box-shadow: 2px 2px 0px rgba(0, 0, 0, 0.1);
		border: 1px solid #000;
		position: relative;
		border-top: 3px solid #000;
	}

	.feed-header {
		margin-bottom: 1.5rem;
		padding-bottom: 1rem;
		border-bottom: 3px solid #000;
		position: relative;
		z-index: 1;
	}

	.feed-header h2 {
		margin: 0 0 0.5rem 0;
		font-size: 2rem;
		font-weight: 700;
		color: #000;
		font-family: 'Old Standard TT', 'Times New Roman', serif;
		position: relative;
		z-index: 1;
		text-transform: uppercase;
		letter-spacing: 0.1em;
		border-bottom: 2px solid #000;
		padding-bottom: 0.5rem;
		display: inline-block;
	}

	.feed-subtitle {
		margin: 0.5rem 0 0 0;
		color: #666;
		font-size: 0.8rem;
		font-style: normal;
		font-family: 'Newsreader', 'Times New Roman', serif;
		text-transform: uppercase;
		letter-spacing: 0.1em;
	}

	.feed-posts {
		display: flex;
		flex-direction: column;
		gap: 1rem;
	}

	.no-posts {
		text-align: center;
		padding: 3rem 2rem;
		color: #999;
		font-style: italic;
	}
</style>

